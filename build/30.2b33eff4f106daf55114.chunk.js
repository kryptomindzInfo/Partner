(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"8577cd5032928c92aded":function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return Z});var o,n=a("8af190b70a6bc55c6f1b"),i=a.n(n),r=a("bd183afcc37eabd79225"),s=a.n(r),d=a("0d7f0986bcd2f33d8a2a"),c=a("7286e4d32da69e8d8af9"),l=a("0b3cb19af78752326f59"),p=a("5eab5618c2f7cb367580"),u=a("d8177b52ec3b30c23986"),f=a("56dae34f294aa29bb48a"),v=a("b9a4675f3a31731e3871"),m=a("041021065ead6515c7e1"),h=a("0b036161fbb62d587aed"),g=a("c62184e16136b13faf11"),b=a("edda6002988d22cf0116"),y=a("0d02ea6f9c8f088e4ee6"),k=a("44d868fbe7bf379dace3"),w=a("80305d31256481b97990"),S=a("885b9f33a5ccdc168660"),N=a("1338cbe09bd1ccd2eec5"),_=a("2ef0388ad848e10584a5"),B=a("3cfc5fe5ae5fc3fb28ab"),x=a("fcb99a06256635f70435");a("18fd55adb10446515347");function F(e){return(F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,a,n){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={children:void 0}),t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});if(1===r)t.children=n;else if(r>1){for(var d=new Array(r),c=0;c<r;c++)d[c]=arguments[c+3];t.children=d}return{$$typeof:o,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function C(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}c.toast.configure({position:"bottom-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});l.c.div.withConfig({displayName:"BankFees__Tab",componentId:"sc-926a65-0"})(["background:",";width:194px;padding:15px;float:left;border:1px solid ",";color:#fff;font-size:20px;"],function(e){return e.theme.primary},function(e){return e.theme.primary}),l.c.div.withConfig({displayName:"BankFees__Tab2",componentId:"sc-926a65-1"})(["float:left;width:194px;border:1px solid ",";color:",";font-size:20px;padding:15px;"],function(e){return e.theme.primary},function(e){return e.theme.primary});var E=localStorage.getItem("bankLogged"),L=localStorage.getItem("bankId"),M=T(m.a,{fullPage:!0}),U=T(d.Helmet,{},void 0,T("meta",{charSet:"utf-8"}),T("title",{},void 0,"Banks | INFRA | E-WALLET")),V=T(u.a,{}),A=T(f.a,{active:"fees"}),D=T("div",{className:"cardHeader"},void 0,T("div",{className:"cardHeaderLeft"},void 0,T("i",{className:"material-icons"},void 0,"supervised_user_circle")),T("div",{className:"cardHeaderRight"},void 0,T("h3",{},void 0,"Revenue Sharing Rules"),T("h5",{},void 0,"Fees created by the infra"))),j=T("thead",{},void 0,T("tr",{},void 0,T("th",{},void 0,"Name"),T("th",{},void 0,"Transaction Type"),T("th",{},void 0,"Ranges"),T("th",{}))),H=T("span",{className:"absoluteMiddleRight primary popMenuTrigger"},void 0,T("i",{className:"material-icons "},void 0,"block")),z=T("div",{className:"iconedInput fl"},void 0,T("i",{className:"material-icons"},void 0,"search"),T("input",{type:"text",placeholder:"Search"})),W=T("i",{className:"material-icons"},void 0,"add"),J=T("span",{},void 0,T("span",{},void 0,"Create Fee")),q=T("div",{className:"cardHeader"},void 0,T("div",{className:"cardHeaderLeft"},void 0,T("i",{className:"material-icons"},void 0,"supervised_user_circle")),T("div",{className:"cardHeaderRight"},void 0,T("h3",{},void 0,"Fee Rules"),T("h5",{},void 0,"Fees created by the bank"))),$=T("thead",{},void 0,T("tr",{},void 0,T("th",{},void 0,"Name"),T("th",{},void 0,"Transaction Type"),T("th",{},void 0,"Transaction Range"),T("th",{},void 0,"Transaction Count"),T("th",{}))),G=T("span",{className:"material-icons"},void 0,"block"),K=T(m.a,{}),Q=T("span",{},void 0,"Decline"),X=T(m.a,{}),Y=T("span",{},void 0,"Approve"),Z=function(e){function t(){var e,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=I(t).call(this),e=!o||"object"!==F(o)&&"function"!==typeof o?P(a):o,O(P(e),"success",function(){return c.toast.success(e.state.notification)}),O(P(e),"error",function(){return c.toast.error(e.state.notification)}),O(P(e),"warn",function(){return c.toast.warn(e.state.notification)}),O(P(e),"handleInputChange",function(t){var a=t.target,o=a.value,n=a.name;e.setState(O({},n,o))}),O(P(e),"goBankEdit",function(t,a){e.props.history.push("/bank/edit-fee/"+t+"/"+a)}),O(P(e),"showMiniPopUp",function(t,a){e.setState({popname:t.name,poptype:t.trans_type,sid:t._id,popup:!0,html:a})}),O(P(e),"closeMiniPopUp",function(){e.setState({popup:!1})}),O(P(e),"logout",function(){localStorage.removeItem("logged"),localStorage.removeItem("name"),e.setState({redirect:!0})}),O(P(e),"addBank",function(t){t.preventDefault(),s.a.post("".concat(x.a,"/generateOTP"),{name:e.state.name,mobile:e.state.mobile,page:"addBank",token:E}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({showOtp:!0,notification:"OTP Sent"}),e.success()}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString()}),e.error()})}),O(P(e),"approve",function(t){e.setState({approveLoading:!0}),t.preventDefault(),s.a.post("".concat(x.a,"/approveFee"),{id:e.state.sid,token:E}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({notification:"Approved"},function(){e.success(),e.closeMiniPopUp(),e.getRules()}),e.setState({approveLoading:!1})}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString(),approveLoading:!1}),e.error()})}),O(P(e),"decline",function(t){e.setState({declineLoading:!0}),t.preventDefault(),s.a.post("".concat(x.a,"/declineFee"),{id:e.state.sid,token:E}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({notification:"Declined"},function(){e.success(),e.closeMiniPopUp(),e.getRules()}),e.setState({declineLoading:!1})}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString(),declineLoading:!1}),e.error()})}),O(P(e),"showWallet",function(e){e.preventDefault()}),O(P(e),"verifyOTP",function(t){t.preventDefault(),s.a.post("".concat(x.a,"/addBank"),{name:e.state.name,address1:e.state.address1,state:e.state.state,zip:e.state.zip,country:e.state.country,ccode:e.state.ccode,email:e.state.email,mobile:e.state.mobile,logo:e.state.logo,contract:e.state.contract,otp:e.state.otp,token:E}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({notification:"Bank added successfully!"}),e.success(),e.closeMiniPopUp(),e.getBanks()}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString()}),e.error()})}),O(P(e),"removeFile",function(t){e.setState(O({},t,null))}),O(P(e),"triggerBrowse",function(e){document.getElementById(e).click()}),O(P(e),"getRules",function(){s.a.post("".concat(x.a,"/getBankRules"),{bank_id:e.state.bank}).then(function(t){200==t.status&&(console.log(t.data),e.setState({rules:t.data.rules}))}).catch(function(e){})}),O(P(e),"getBankRules",function(){s.a.post("".concat(x.a,"/getAll"),{type:"bank",token:E,page:"bankfee"}).then(function(t){200==t.status&&(console.log(t.data),e.setState({loading:!1,bankRules:t.data.rows}))}).catch(function(e){})}),O(P(e),"showInfraFeeView",function(){console.log("working!!"),e.setState({isInfraFeeVisible:!0})}),O(P(e),"showBankFeeView",function(){console.log("working bank!!"),e.setState({isInfraFeeVisible:!1})}),O(P(e),"showPopup",function(){e.setState({popup:!0})}),O(P(e),"closePopup",function(){e.setState({popup:!1})}),e.state={sid:"",bank:L,name:"",address1:"",html:"",popname:"",poprange:"",poptype:"",poppercent:"",state:"",zip:"",country:"",ccode:"",mobile:"",email:"",logo:null,contract:null,loading:!0,redirect:!1,totalBanks:0,notification:"Welcome",popup:!1,user_id:E,banks:[],rules:[],otp:"",showOtp:!1,isInfraFeeVisible:!0},e.success=e.success.bind(P(e)),e.error=e.error.bind(P(e)),e.warn=e.warn.bind(P(e)),e.onChange=e.onChange.bind(P(e)),e.fileUpload=e.fileUpload.bind(P(e)),e}var a,o,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,n["Component"]),a=t,(o=[{key:"onChange",value:function(e){e.target.files&&null!=e.target.files[0]&&this.fileUpload(e.target.files[0],e.target.getAttribute("data-key"))}},{key:"fileUpload",value:function(e,t){var a=this,o=new FormData;o.append("file",e);s.a.post("".concat(x.a,"/fileUpload?token=").concat(E),o,{headers:{"content-type":"multipart/form-data"}}).then(function(e){if(200!=e.status)throw e.data.error;if(e.data.error)throw e.data.error;a.setState(O({},t,e.data.name))}).catch(function(e){a.setState({notification:e.response?e.response.data.error:e.toString()}),a.error()})}},{key:"componentDidMount",value:function(){void 0!==E&&null!==E&&(this.getRules(),this.getBankRules())}},{key:"render",value:function(){var e=this;var t=this.state,a=t.loading,o=t.redirect;if(a)return M;if(o)return null;var n=this;return T(p.a,{from:"bank"},void 0,U,V,T(v.a,{verticalMargin:!0},void 0,A,T(h.a,{},void 0,T(g.a,{marginBottom:"33px",inputWidth:"calc(100% - 241px)",className:"clr"},void 0,T("div",{className:"clr"},void 0,T("div",{className:"".concat(this.state.isInfraFeeVisible?"ActiveTab":"InactiveTab"),onClick:this.showInfraFeeView},void 0,"Bank and Infra"),T("div",{className:"".concat(this.state.isInfraFeeVisible?"InactiveTab":"ActiveTab"),onClick:this.showBankFeeView},void 0,"Bank and Users"))),T(b.a,{bigPadding:!0,style:{display:"".concat(this.state.isInfraFeeVisible?"block":"none")}},void 0,D,T("div",{className:"cardBody"},void 0,T(k.a,{marginTop:"34px",smallTd:!0},void 0,j,T("tbody",{},void 0,this.state.rules&&this.state.rules.length>0?this.state.rules.map(function(t,a){var o=JSON.parse(t.editedRanges),i=o.ranges;return T("tr",{},t._id,T("td",{},void 0,0==t.edit_status?T("span",{},void 0,o.name):T("span",{},void 0,t.name)),T("td",{className:"tac"},void 0,0==t.edit_status?T("span",{},void 0,o.trans_type):T("span",{},void 0,t.trans_type)),T("td",{},void 0,i.map(function(e){return T("div",{},void 0,"Count:"," ",T("span",{className:"green"},void 0,e.trans_from," - ",e.trans_to),", Fixed:"," ",T("span",{className:"green"},void 0,x.c+" "+e.fixed_amount),", Percentage:"," ",T("span",{className:"green"},void 0,e.percentage))})),T("td",{className:"tac bold"},void 0,"Inactive"==t.active?H:T(y.a,{className:"addBankButton",onClick:function(){return n.goBankEdit(e.state.bankRules[a]._id,t._id)}},void 0,0==t.edit_status?"Pending":2==t.edit_status?"Declined":"Approved")))}):null)))),T("div",{style:{display:"".concat(this.state.isInfraFeeVisible?"none":"block")}},void 0,T(g.a,{marginBottom:"33px",inputWidth:"calc(100% - 241px)",className:"clr"},void 0,z,T(w.a,{href:"/bank/create-fee",float:"right"},void 0,T(y.a,{className:"addBankButton",flex:!0,onClick:this.try},void 0,W,J))),T(b.a,{bigPadding:!0},void 0,q,T("div",{className:"cardBody"},void 0,T(k.a,{marginTop:"34px",smallTd:!0},void 0,$,T("tbody",{},void 0,this.state.bankRules&&this.state.bankRules.length>0?this.state.bankRules.map(function(t,a){var o=JSON.parse(t.editedRanges);return T("tr",{},t._id,T("td",{},void 0,t.name),T("td",{className:"tac"},void 0,t.trans_type),T("td",{className:"tac"},void 0,x.c," ",T("span",{className:"green"},void 0,t.trans_from)," - ",x.c," ",T("span",{className:"green"},void 0,t.trans_to)," "),T("td",{},void 0,o.map(function(e){return T("div",{},void 0,"Count:"," ",T("span",{className:"green"},void 0,e.trans_from," - ",e.trans_to),", Fixed:"," ",T("span",{className:"green"},void 0,x.c+" "+e.fixed_amount),", Percentage:"," ",T("span",{className:"green"},void 0,e.percentage))})),T("td",{className:"tac bold"},void 0,0==t.status?G:T(y.a,O({className:"addBankButton",onClick:function(){return n.goBankEdit(t._id,e.state.rules[a]._id)}},"className","pointer"),void 0,"Edit")))}):null))))))),this.state.popup?T(S.a,{close:this.closeMiniPopUp.bind(this)},void 0,this.state.showOtp?T("div",{},void 0,T("h1",{},void 0,i.a.createElement(FormattedMessage,messages.verify)),T("form",{},void 0,T(B.a,{},void 0,T("label",{},void 0,i.a.createElement(FormattedMessage,messages.otp),"*"),T(TextInput,{type:"text",name:"otp",onFocus:function(e){e.target.parentElement.querySelector("label").classList.add("focused")},onBlur:function(e){var t=e.target;""==t.value&&t.parentElement.querySelector("label").classList.remove("focused")},value:this.state.otp,onChange:this.handleInputChange,required:!0})),T(y.a,{filledBtn:!0,marginTop:"50px"},void 0,T("span",{},void 0,i.a.createElement(FormattedMessage,messages.verify))))):T("div",{},void 0,T("form",{},void 0,T("p",{},void 0,T("span",{id:"popname"},void 0,this.state.popname)),T("p",{},void 0," ","Sending from ",T("span",{id:"poptype"},void 0,this.state.poptype)),this.state.html.map(function(e){return T("div",{},void 0,"Count:"," ",T("span",{className:"green"},void 0,e.trans_from," - ",e.trans_to),", Fixed:"," ",T("span",{className:"green"},void 0,x.c+" "+e.fixed_amount),", Percentage:"," ",T("span",{className:"green"},void 0,e.percentage))}),T(N.a,{},void 0,T(_.a,{},void 0,T(B.a,{},void 0,this.state.declineLoading?T(y.a,{filledBtn:!0,marginTop:"50px",accentedBtn:!0,onClick:this.decline,disabled:!0},void 0,K):T(y.a,{filledBtn:!0,marginTop:"50px",accentedBtn:!0,onClick:this.decline},void 0,Q))),T(_.a,{},void 0,T(B.a,{},void 0,this.state.approveLoading?T(y.a,{filledBtn:!0,marginTop:"50px",onClick:this.approve,disabled:!0},void 0,X):T(y.a,{filledBtn:!0,marginTop:"50px",onClick:this.approve},void 0,Y))))))):null)}}])&&C(a.prototype,o),r&&C(a,r),t}()}}]);